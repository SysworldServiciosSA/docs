swagger: "2.0"

info:
  version: 1.0.0
  title: Sysworld Servicios S.A. API
  description: Public services offered by Sysworld

schemes:
  - https
host: api-staging.enviocertificado.com

paths:
  /users/{email}:
    get:
      summary: Returns if a given user exists. No authorization is required.
      description: Returns if a given user exists. No authorization is required.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
      - name: "email"
        in: "path"
        description: The user email
        required: true
        type: "string"
      - in: body
        name: EmptyRequest
        required: true
        description: No payload
        schema:
          $ref: "#/definitions/Empty"
      responses:
        200:
          description: User exists.
          schema:
            $ref: "#/definitions/Empty"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        404:
          description: User does not exist
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
  /login:
    post:
      summary: Obtain a JWT from a username/password (for web sessions)
      description: Useful when logging in from a web interface or other UI in order to open a session. Following requests will contain the header X-New-JWT with refreshed tokens.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with your username and password
        required: true
        type: string
      - in: body
        name: LoginRequest
        required: true
        description: No payload
        schema:
          $ref: "#/definitions/LoginRequest"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/LoginResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
  /pdfs/batch_config/{id}:
    post:
      summary: Generates a PDF from an existing batch config
      description: "Send a text file as content, can be CSV, fixed fields width, etc"
      consumes:
        - multipart/form-data
        - text/csv
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "id"
        in: "path"
        description: The Batch Configuration ID
        required: true
        type: "integer"
      - name: file
        in: formData
        description: The uploaded file data
        required: true
        type: file
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/CreatedBatchResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string

  /validations/address:
    post:
      summary: Validates a street address
      description: This will attempt to validate a street address
      consumes:
        - multipart/form-data
        - text/csv
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - in: body
        name: AddressValidationRequest
        description: Payload to validate Addresses
        required: true
        schema:
          $ref: "#/definitions/AddressValidationRequest"
      responses:
        202:
          description: Only when content-type is text/csv. Your batch was accepted and will be eventually processed
          schema:
            $ref: "#/definitions/CreatedBatchResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/AddressValidationResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string

        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string

  /validations/phone:
    post:
      summary: Validates a Phone
      description: This will attempt to validate a Phone Number testing its consistency and other factors
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - in: body
        name: PhoneValidationRequest
        description: Payload to validate Phone Numbers
        required: true
        schema:
          $ref: "#/definitions/PhoneValidationRequest"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/PhoneValidationResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string

        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string

  /validations/cbu:
    post:
      summary: Validates a CBU
      description: This will attempt to validate a CBU testing its consistency and other factors
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - in: body
        name: CBUValidationRequest
        description: Payload to validate CBUs
        required: true
        schema:
          $ref: "#/definitions/CBUValidationRequest"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/CBUValidationResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string

        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string

  /validations/email:
    post:
      summary: Validates an email address
      description: This will attempt to validate an email address testing its consistency and other factors
      consumes:
        - multipart/form-data
        - text/csv
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - in: body
        name: EmailValidationRequest
        description: Payload to validate email addresses
        required: true
        schema:
          $ref: "#/definitions/EmailValidationRequest"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/EmailValidationResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        202:
          description: Only when content-type is text/csv. Your batch was accepted and will be eventually processed
          schema:
            $ref: "#/definitions/CreatedBatchResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string

  /batch/{id}:
    get:
      summary: Returns batch information or result
      description: "When requested with 'Accept: text/csv' will return the batch result. When requested with 'Accept: application/json' will return the information of the given batch id."
      consumes:
        - application/json
      produces:
        - application/json
        - multipart/form-data
        - text/csv
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      #- name: Accept
      #  in: header
      #  description: "When requested with 'Accept: text/csv' will return the batch result. When requested with 'Accept: application/json' will return the information of the given batch id."
      #  required: true
      #  type: string
      - name: "id"
        in: "path"
        description: The Batch ID
        required: true
        type: "integer"
      responses:
        200:
          description: Successful operation
          examples:
            application/json:
              batch:
                id: 123
                type: "email_validation"
                request_id: "ba4d0af8-4a1c-11e7-829a-7831c1c0328a"
                state: "finished"
                error: "internal_error"
                error_line: 400
                rows_total: 500
                rows_processed: 400
                created: 1496684197
                updated: 1496684797
                created_str: "2017-06-05T17:36:37Z"
                updated_str: "2017-06-05T17:46:37Z"
              success: true
            text/csv:
              email;result;hint;custom_fields

              user1@domain.com;valid;uzer@domain.com;extra_field_1;extra_field_2

              user2@domain.com;invalid;;extra_field_1;extra_field_2

              user3@domain.com;unknown;;extra_field_1;extra_field_2
          schema:
            $ref: "#/definitions/BatchResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
  /pdfs/customer/{customerId}:
    get:
      summary: Returns the given PDF for the given customer ID.
      description: Returns the given PDF for the given customer ID.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
      - name: Authorization
        in: header
        description: Use 'Basic' with 'apikey' as username and your api key as the password. Or 'Bearer' and your JWT.
        required: true
        type: string
      - name: "organization_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "department_id"
        in: "query"
        required: false
        type: "string"
        description: "Required when using Bearer (i.e: JWT) authentication"
      - name: "email"
        in: "query"
        required: true
        type: "string"
        description: The target Email for the PDF
      - name: "field1"
        in: "query"
        required: true
        type: "string"
        description: ID Field 2
      - name: "field2"
        in: "query"
        required: true
        type: "string"
        description: ID Field 2
      - name: "field3"
        in: "query"
        required: true
        type: "string"
        description: ID Field 3
      - name: "field4"
        in: "query"
        required: true
        type: "string"
        description: ID Field 4
      - name: "field5"
        in: "query"
        required: true
        type: "string"
        description: ID Field 5
      - name: "customerId"
        in: "path"
        description: The customer ID
        required: true
        type: "integer"
      responses:
        302:
          description: Successful operation. Returns the link to download the PDF.
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Methods:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Access-Control-Allow-Headers:
              type: string
        400:
          description: Client Error, Bad Request
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        401:
          description: Not Authorized
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        405:
          description: Method Not Allowed
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        406:
          description: Not Acceptable
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        415:
          description: Unsupported Media Type
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
        500:
          description: Server Error
          schema:
            $ref: "#/definitions/ErrorResponse"
          headers:
            X-New-JWT:
              type: string
            X-Request-ID:
              type: string
            X-Request-Time:
              type: integer
            Access-Control-Allow-Origin:
              type: string
            Access-Control-Allow-Credentials:
              type: string
            Content-Type:
              type: string
definitions:
  PhoneValidationResult:
    type: "string"
    title: "PhoneValidationResult"
    description: "Possible result values for Phone validations"
    enum:
    - valid
    - invalid

  PhoneType:
    type: "string"
    title: "PhoneType"
    description: "Possible phone types"
    enum:
    - fixed
    - mobile
    - fixed_or_mobile
    - toll_free
    - premium
    - shared_cost
    - voip
    - personal_number
    - pager
    - uan

  Empty:
    type: "object"
    title: "Empty Schema"
    description: "No payload"

  ErrorResponse:
    type: object
    required:
    - success
    - error_description
    properties:
      success:
        type: boolean
        description: Always false on errors
      error_description:
        type: array
        description: One or more specific error messages for client errors
        items:
          type: string
    title: ErrorResponse
    description: This is an error response for requests with status other than 2xx

  PhoneValidationRequest:
    type: object
    required:
    - phone
    - default_country_code
    - default_area_code
    - numbering_plan
    properties:
      phone:
        type: string
        description: The Phone to validate
      numbering_plan:
        type: string
        description: 2-letter ISO code of the country where this number should be dialed from
      default_country_code:
        type: integer
        description: Will use this country code when unable to guess it
      default_area_code:
        type: integer
        description: Will use this area code when unable to guess it
      with_hlr:
        type: boolean
        description: Perform an HLR lookup
    title: PhoneValidationRequest
    description: Payload to validate Phone Numbers

  PhoneValidationResponse:
    type: object
    required:
    - id
    - result
    - success
    - last_step
    - extra
    - type
    - national_number
    - national_format
    - longitude
    - latitude
    - international_format
    - country_iso
    - country_code
    - carrier
    - area_geo
    - area_code
    properties:
      id:
        type: string
        description: The operation ID
      result:
        $ref: "#/definitions/AddressValidationResult"
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
      last_step:
        type: string
        description: Last step reached in the validation chain
      area_code:
        type: string
        description: Area code for this number
      area_geo:
        type: string
        description: Geographical region name for this number
      carrier:
        type: string
        description: Carrier owner of this number
      country_code:
        type: string
        description: Country dial code for this number
      country_iso:
        type: string
        description: 2-letter iso code of the country for this number
      international_format:
        type: string
        description: E164 number
      latitude:
        type: string
        description: Latitude location of the region for this number
      longitude:
        type: string
        description: Longitude location of the region for this number
      national_format:
        type: string
        description: How this number should be dialed from inside the country
      national_number:
        type: string
        description: The "national" part of the E164 number
      type:
        $ref: "#/definitions/PhoneType"
      extra:
        type: array
        items:
          type: string
        description: "Extra information after validation, e.g: error descriptions"
    title: PhoneValidationResponse
    description: Response of a phone validation

  CBUValidationRequest:
    type: object
    required:
    - cbu
    properties:
      cbu:
        type: string
        description: The CBU to validate
      alias:
        type: string
        description: The CBU alias to validate
      dni:
        type: string
        description: The DNI to validate it matches against the CBU
    title: CBUValidationRequest
    description: Payload to validate CBUs

  AddressValidationRequest:
    type: object
    required:
    - address
    properties:
      address:
        type: string
        description: The address to validate
    title: AddressValidationRequest
    description: Payload to validate addresses

  EmailValidationRequest:
    type: object
    required:
    - email
    properties:
      email:
        type: string
        description: The email address to validate
    title: EmailValidationRequest
    description: Payload to validate email addresses

  AddressValidationResult:
    type: "string"
    title: "AddressValidationResult"
    description: "Possible result values for Address validations"
    enum:
    - valid
    - invalid
    - unknown

  CBUValidationResult:
    type: "string"
    title: "CBUValidationResult"
    description: "Possible result values for CBU validations"
    enum:
    - valid
    - invalid

  EmailValidationResult:
    type: "string"
    title: "EmailValidationResult"
    description: "Possible result values for email validations"
    enum:
    - valid
    - invalid
    - unknown
    - retry_later

  LoginRequest:
    type: object
    properties:
      forever:
        type: boolean
        description: "If true, no expiration will be set in the JWT"
    title: LoginRequest
    description: Login Request

  LoginResponse:
    type: object
    required:
    - token
    properties:
      token:
        type: string
        description: A JWT
    title: LoginResponse
    description: Login Response

  CreatedBatchResponse:
    type: object
    required:
    - batch_id
    - success
    properties:
      batch_id:
        type: integer
        description: The batch ID
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
    title: CreatedBatchResponse
    description: Response for a batch creation

  BatchTypes:
    type: "string"
    title: "BatchTypes"
    description: "Possible batch types"
    enum:
    - email_validation

  BatchStates:
    type: "string"
    title: "BatchStates"
    description: "Possible batch states"
    enum:
    - pending
    - ready
    - validating
    - processing
    - exporting
    - failed
    - finished

  BatchErrors:
    type: "string"
    title: "BatchErrors"
    description: "Possible batch errors"
    enum:
    - internal_error
    - line_too_long
    - line_too_short

  Addresses:
    type: array
    title: A collection of street addresses
    description: A collection of street addresses
    items:
      $ref: "#/definitions/Address"

  Address:
    type: object
    title: An address
    description: Full information of a street address
    required:
    - full_address
    - latitude
    - longitude
    - postal_code_suffix
    - postal_code
    - country
    - admin1
    - admin2
    - street
    - street_number
    properties:
      full_address:
        type: string
        description: Full human readable street address
      latitude:
        type: number
        description: Latitude of the street address
      longitude:
        type: number
        description: Latitude of the street address
      postal_code_suffix:
        type: string
        description: The postal code suffix (if any) for the street address
      postal_code:
        type: string
        description: The postal code for the street address
      country:
        type: string
        description: ISO2 country code
      admin1:
        type: string
        description: Regional/Political subdivision inside country
      admin2:
        type: string
        description: Regional/Political subdivision inside admin1
      street:
        type: string
        description: The street of the street address
      street_number:
        type: string
        description: The street number of the street address

  Batch:
    type: object
    required:
    - id
    - type
    - request_id
    - state
    - error
    - error_line
    - rows_total
    - rows_processed
    - created
    - updated
    - created_str
    - updated_str
    properties:
      id:
        type: integer
        description: The Batch ID
      type:
        $ref: "#/definitions/BatchTypes"
      request_id:
        type: string
        description: The request ID that originated the batch
      state:
        $ref: "#/definitions/BatchStates"
      error:
        $ref: "#/definitions/BatchErrors"
      error_line:
        type: integer
        description: Number of line that caused an error in the batch
      rows_total:
        type: integer
        description: Total number of lines recogniced in the batch
      rows_processed:
        type: integer
        description: Total number of processed rows in the batch
      created:
        type: integer
        description: Unix timestamp of the batch creation
      updated:
        type: integer
        description: Unix timestamp for last batch update
      created_str:
        type: string
        description: ISO8601 date of the batch creation
      updated_str:
        type: string
        description: ISO8601 date of the last batch update
    title: Batch
    description: A batch

  BatchResponse:
    type: object
    required:
    - batch
    - success
    properties:
      batch:
        $ref: "#/definitions/Batch"
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
    title: BatchResponse
    description: Result of requesting a batch information

  AddressValidationResponse:
    type: object
    required:
    - id
    - result
    - success
    - last_step
    - extra
    - results
    properties:
      id:
        type: string
        description: The operation ID
      result:
        $ref: "#/definitions/AddressValidationResult"
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
      last_step:
        type: string
        description: Last step reached in the validation chain
      results:
        $ref: "#/definitions/Addresses"
      extra:
        type: array
        items:
          type: string
        description: "Extra information after validation, e.g: error descriptions"
    title: AddressValidationResponse
    description: Response of an address validation

  CBUValidationResponse:
    type: object
    required:
    - id
    - result
    - success
    - last_step
    - extra
    properties:
      id:
        type: string
        description: The operation ID
      result:
        $ref: "#/definitions/CBUValidationResult"
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
      last_step:
        type: string
        description: Last step reached in the validation chain
      bank_code:
        type: string
        description: Bank code
      bank_name:
        type: string
        description: Bank name
      branch_code:
        type: string
        description: Bank branch code
      branch_name:
        type: string
        description: Bank branch name
      branch_address:
        type: string
        description: Bank branch street address
      branch_phone:
        type: string
        description: Bank branch phone number
      branch_email:
        type: string
        description: Bank branch email
      account:
        type: string
        description: Account number
      extra:
        type: array
        items:
          type: string
        description: "Extra information after validation, e.g: error descriptions"
    title: CBUValidationResponse
    description: Response of a CBU validation

  EmailValidationResponse:
    type: object
    required:
    - id
    - result
    - success
    - last_step
    - extra
    properties:
      id:
        type: string
        description: The operation ID
      result:
        $ref: "#/definitions/EmailValidationResult"
      success:
        type: boolean
        description: Result of the operation itself (can be true even if the object is not valid)
      last_step:
        type: string
        description: Last step reached in the validation chain
      hint:
        type: string
        description: Suggestion when returning a result as invalid
      extra:
        type: array
        items:
          type: string
        description: "Extra information after validation, e.g: error descriptions"
    title: EmailValidationResponse
    description: Response of an email address validation
